*** Settings ***
Library     RequestsLibrary
Library     OperatingSystem
Library     Collections
Library     String
Library     DateTime
Library     Collections
Library     SeleniumLibrary
Library     RPA.JSON
Resource    ../../../../Variables/variablesStage.robot

*** Variables ***

${current_time}=    Evaluate    time.time() + 360    time
${formatted_time}=    Evaluate    time.strftime('%a, %d %b %Y %H:%M:%S GMT', time.gmtime(${current_time}))    time



*** Test Cases ***
Set Date Variables
    ${fecha_hoy}=    Get Current Date    result_format=%Y-%m-%d
    Set Global Variable    ${fecha_hoy}

    ${fecha_manana}=    Add Time To Date    ${fecha_hoy}    1 days    result_format=%Y-%m-%d
    Set Global Variable    ${fecha_manana}

    ${fecha_pasado_manana}=    Add Time To Date    ${fecha_hoy}    2 days    result_format=%Y-%m-%d
    Set Global Variable    ${fecha_pasado_manana}
    ${fecha_pasado_pasado_manana}=    Add Time To Date    ${fecha_hoy}    3 days    result_format=%Y-%m-%d
    Set Global Variable    ${fecha_pasado_pasado_manana}

    ${dia_actual}=    Convert Date    ${fecha_hoy}    result_format=%a
    ${dia_actual_lower}=    Set Variable    ${dia_actual.lower()}
    ${dia_manana}=    Convert Date    ${fecha_manana}    result_format=%a
    ${dia_manana_lower}=    Set Variable    ${dia_manana.lower()}

    ${arrival_date}=    Set Variable    ${fecha_manana}T01:00:00.000Z
    Set Global Variable    ${arrival_date}
    ${r_estimated_arrival1}=    Set Variable    ${fecha_manana}T14:45:57.000Z
    Set Global Variable    ${r_estimated_arrival1}
    ${service_date}=    Set Variable    ${fecha_manana}T00:25:29.000Z
    Set Global Variable    ${service_date}
    ${modified_arrival_date}=    Set Variable    ${fecha_manana}T01:00:00.000Z
    Set Global Variable    ${modified_arrival_date}
    ${r_modified_estimated_arrival}=    Set Variable    ${fecha_pasado_manana}T14:45:57.000Z
    Set Global Variable    ${r_modified_estimated_arrival}
    ${modified_service_date}=    Set Variable    ${fecha_manana}T00:25:29.000Z
    Set Global Variable    ${modified_service_date}
    ${service_date_20min}=    Set Variable    ${fecha_manana}T00:20:00.000Z
    Set Global Variable    ${service_date_20min}
    ${service_date_22min}=    Set Variable    ${fecha_manana}T00:47:00.000Z
    Set Global Variable    ${service_date_22min}
    ${start_date}=    Set Variable    ${fecha_manana}T03:00:00.000Z
    Set Global Variable    ${start_date}
    ${end_date_4weeks}=    Set Variable    2023-12-30T02:59:59.999Z
    Set Global Variable    ${end_date_4weeks}
    ${end_date}=    Set Variable    ${fecha_pasado_pasado_manana}T03:00:00.000Z
    Set Global Variable    ${end_date}
    ${end_date_tomorrow}=    Set Variable    ${fecha_manana}T03:00:00.000Z
    Set Global Variable    ${end_date_tomorrow}
    ${schedule_day}=    Set Variable    ${dia_actual_lower}
    Set Global Variable    ${schedule_day}
    ${schedule_day_tomorrow}=    Set Variable    ${dia_manana_lower}
    Set Global Variable    ${schedule_day_tomorrow}
    ${start_date_today}=    Set Variable    ${fecha_hoy}T03:00:00.000Z
    Set Global Variable    ${start_date_today}
    ${today_date}=    Set Variable    ${fecha_hoy}
    Set Global Variable    ${today_date}
    ${end_date_tomorrow2}=    Set Variable    ${fecha_manana}T02:59:59.999Z
    Set Global Variable    ${end_date_tomorrow}
    ${expiration_date_qr}=    Set Variable    ${fecha_manana}T14:10:37.968Z
    Set Global Variable    ${expiration_date_qr}
    ${start_date_tickets}=     Set Variable     ${fecha_hoy}T04:00:00.000Z
        Set Global Variable    ${start_date_tickets}
    ${end_date_tickets}=     Set Variable     ${fecha_manana}T03:59:59.999Z
        Set Global Variable    ${end_date_tickets}

    ${start_date_tomorrow2}=    Set Variable    ${fecha_manana}T04:00:00.000Z
    Set Global Variable     ${start_date_tomorrow2}

    ${end_date_pastTomorrow}=    Set Variable    ${fecha_pasado_manana}T03:59:59.999Z
    Set Global Variable    ${end_date_pastTomorrow}


1 hours local
    ${date}    Get Current Date    time_zone=local    exclude_millis=yes
    ${formatted_date}    Convert Date    ${date}    result_format=%H:%M:%S
    Log    Hora Actual: ${formatted_date}

    # Sumar una hora
    ${one_hour_later}    Add Time To Date    ${date}    1 hour
    ${formatted_one_hour_later}    Convert Date    ${one_hour_later}    result_format=%H:%M
    Log    Hora Actual + 1 hora: ${formatted_one_hour_later}
    Set Global Variable    ${formatted_one_hour_later}
2 hours local
    ${date}    Get Current Date    time_zone=local    exclude_millis=yes
    ${formatted_date}    Convert Date    ${date}    result_format=%H:%M:%S
    Log    Hora Actual: ${formatted_date}

    # Sumar una hora
    ${one_hour_later}    Add Time To Date    ${date}    2 hour
    ${formatted_two_hour_later}    Convert Date    ${one_hour_later}    result_format=%H:%M
    Log    Hora Actual + 1 hora: ${formatted_two_hour_later}
    Set Global Variable    ${formatted_two_hour_later}


## ----------------------------VISIBILIDAD-----------------------------------------------------##
Modify community (No external validation)
    Create Session    mysesion    ${STAGE_URL}    verify=true

    # Define la URL del recurso que requiere autenticación (puedes ajustarla según tus necesidades)

    # Configura las opciones de la solicitud (headers, auth)
    ${headers}=    Create Dictionary
    ...    Authorization=${tokenAdmin}
    ...    Content-Type=application/json
    # Realiza la solicitud GET en la sesión por defecto
    ${response}=    PUT On Session
    ...    mysesion
    ...    url=api/v1/admin/community/6654ae4eba54fe502d4e4187
    ...    data={"_id":"6654ae4eba54fe502d4e4187","config":{"general":{"hasSubsidy":{"active":false,"subsidizedUsers":[],"userAmount":null,"subsidizedAmount":null},"validationParams":{"allowMultipleUseValidationCodes":false,"forceMandatoryParams":false,"params":[{"mandatory":true,"check":true,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a66","name":"rut","description":"rut","dataType":"rut","isUserStop":false,"validationExpr":""},{"mandatory":false,"check":false,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a67","name":"address","description":"Domicilio","dataType":"location","isUserStop":true,"validationExpr":""},{"mandatory":false,"check":false,"show":false,"private":true,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a68","name":"coordinates","description":"Coordenadas","dataType":"coordinates","isUserStop":true,"validationExpr":""},{"mandatory":true,"check":true,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a69","name":"Color","description":"","dataType":"string","isUserStop":false,"validationExpr":""},{"mandatory":true,"check":true,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a6a","name":"Animal","description":"","dataType":"string","isUserStop":false,"validationExpr":""}],"enabled":true},"balance":{"enabled":true},"betaFeatures":[],"allowsManualUsers":true,"replacesManualUser":false,"allowAds":true,"allowCustomEmail":false,"allowCustomId":false,"hasUserMessagingSystem":true,"public":true,"assocCommunities":[],"hidePersonalInfoForSC":false,"ui":{},"privacySettings":{"general":{"hidePersonalInfoForSC":false},"privateBus":{"hideSCDriverNames":false,"hideSCRouteParams":false,"restrictAdmins":{"serviceCost":{"enabled":false,"allowed":"admins","adminIds":[],"adminLevels":[],"roleIds":[]}}}},"products":{"enabled":true},"allowsValidationOptions":false,"allowsCustomJoinWithoutEmailCheck":false},"privateBus":{"userApp":{"allowsMultipleReservations":{"enabled":true,"amountLimit":0}},"oDDSettings":{"joinNewAdminODDs":true,"enableToNewUsers":{"enabled":true,"specificParams":{"enabled":false,"params":[]}}},"scheduling":{"enabled":true,"allowSeatReservations":true,"autoAssignReservations":{"enabled":false},"dynamicResourceAssignment":{"enabled":true,"limitTime":5,"limitUnit":"minutes"},"reservation":{"restrictions":{"enabled":false,"amount":1,"time":1,"unit":"days","userSkip":[]},"enabled":false},"minimumConfirmationTime":{"enabled":true,"amount":3,"unit":"minutes"},"minimumTimeToAccept":{"enabled":true,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[]}},"minimumTimeToStart":{"enabled":false,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[]}},"minimumTimeToConfirm":{"enabled":false,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[]}},"minimumTimeToAssignDriver":{"enabled":true,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[]}},"admin":{"skipAllReservationsAssignedCheck":true},"apportioning":{"enabled":false,"type":"estimated"},"serviceCreationAnticipation":4},"budgetSystem":{"enabled":false},"restrictiveLabels":{"enabled":true,"labels":["etiqueta1"]},"validation":{"timestamp":{"userSkip":[],"enabled":true,"allowsSkip":true},"dailyLimit":{"userSkip":[],"enabled":false,"allowsSkip":false,"amount":0},"timeLimit":{"userSkip":[],"enabled":false,"allowsSkip":false,"amount":1,"time":1,"unit":"minutes"},"departureLimit":{"userSkip":[],"enabled":false,"allowsSkip":false,"amount":0},"DNIValidation":{"enabled":true,"field":"rut","allowsExternal":true},"bCValidation":{"enabled":true,"field":""},"customQRValidation":{"enabled":true,"field":"Rut"},"secureNFCValidation":{"enabled":false},"customValidation":{"enabled":true,"dataType":"text","options":[],"name":"rut","description":"rut"},"customValidationParams":{"driverParams":[],"passengerParams":[]},"usesInternalNFC":false,"validationToken":"","healthPoll":false,"enabled":true,"allowsStatic":false,"usesTickets":true,"ticketPrice":100,"usesPasses":true,"external":[]},"assistant":{"entryTimes":[],"departureTimes":[],"enabled":false,"collecting":false,"description":""},"poll":{"active":false,"answeredBy":[]},"snapshots":{"service":{"enabled":true,"retentionTime":{"amount":0,"unit":"hours"}},"nonService":{"enabled":false}},"harassmentAssistanceSettings":{"enabled":true,"showTextAbove":true,"aboveText":"","showInformation":true,"informationText":""},"healthPoll":{"enabled":false,"askUser":false},"passengerList":{"data":{"fullName":false,"validationParam":false,"phone":false,"community":false},"enabled":false},"reports":{"visibleCode":"plate"},"driverApp":{"visibleCode":"plate","allowsReuseVehicles":true},"passengerApp":{"visibleCode":"plate"},"multipleUseQRCodes":{"enabled":false,"uncapped":false,"amount":1},"internalRoutes":{"enabled":false},"internalLegs":{"enabled":false},"emergencyCall":{"enabled":true},"departureHourFulfillment":{"enabled":false,"ranges":[]},"arrivalHourFulfillment":{"enabled":false,"ranges":[]},"validateDeparture":{"enabled":true},"restrictRTL":{"enabled":false},"emergencyCallSettings":{"enabled":true},"enabled":true,"apportionCategories":[],"labels":["etiqueta1"],"allowsRating":true,"allowsSnapshots":false,"allowsScreenshots":true,"usesPin":false,"noPassengerInfo":false,"allowGenericVehicles":true,"oDDServices":[{"pricing":{"timeDistanceConfig":{"baseFare":0,"costPerKm":0,"costPerMinute":0,"tolls":[],"additionalCharges":[]},"model":"manual","useDistanceForApportioning":false,"zones":[],"costs":[]},"maximumReservationTime":{"amount":1,"unit":"minutes"},"minimumReservationTime":{"amount":1,"unit":"minutes"},"minimumApprovationAnticipationTime":{"amount":1,"unit":"hours","enabled":false},"reservationExpirationTime":{"amount":1,"unit":"hours"},"minimumConfirmationTime":{"enabled":false,"amount":null,"unit":"hours"},"startLimit":{"enabled":false,"amount":1,"unit":"hours"},"joinTimeLimit":{"amount":20,"unit":"minutes"},"minimumTimeToAssignDriver":{"sendTo":{"emails":[],"adminLevels":[],"roleIds":[],"destinataries":"admins"},"enabled":false,"amount":1,"unit":"hours"},"minimumTimeToAccept":{"sendTo":{"emails":[],"adminLevels":[],"roleIds":[],"destinataries":"admins"},"enabled":false,"amount":1,"unit":"hours"},"minimumTimeToStart":{"sendTo":{"emails":[],"adminLevels":[],"roleIds":[],"destinataries":"admins"},"enabled":false,"amount":1,"unit":"hours"},"minimumTimeToConfirm":{"sendTo":{"emails":[],"adminLevels":[],"roleIds":[],"destinataries":"admins"},"enabled":false,"amount":1,"unit":"hours"},"notifyNewODDRequest":{"sendTo":{"emails":[],"adminLevels":[],"roles":[],"destinataries":"admins"},"enabled":false},"notifyNewODDCreated":{"sendTo":{"emails":[],"adminLevels":[],"roles":[],"destinataries":"admins"},"enabled":false},"notifyApprovedODD":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false},"notifyUnboardedPassengers":{"sendTo":{"emails":[],"adminLevels":[],"roles":[],"destinataries":"admins"},"enabled":false,"sendAt":"eachStop"},"notifyPassengersWithoutReservation":{"sendTo":{"emails":[],"adminLevels":[],"roles":[],"destinataries":"admins"},"enabled":false,"sendAt":"eachStop"},"notifySkippedStop":{"sendTo":{"emails":[],"adminLevels":[],"roles":[],"destinataries":"admins"},"enabled":false},"notifyAdmins":{"minimumTimeToAssignVehicle":{"sendTo":{"emails":[],"adminLevels":[],"roleIds":[]},"enabled":false,"amount":1,"unit":"hours"}},"canResume":{"timeLimit":{"enabled":false,"amount":5,"unit":"minutes"},"enabled":false},"pastServicesApproval":{"enabled":true},"validateDeparture":{"enabled":false},"userRequests":{"freeRequests":{"enabled":true,"asap":false},"emergencyRequests":{"enabled":false},"exclusiveRequests":{"enabled":false},"limitedOptions":{"enabled":false},"multipleRequests":{"enabled":false,"amountLimit":0},"joinDepartures":{"enabled":true,"maxCapacity":5,"distanceRatio":0},"reasons":{"list":[],"enabled":false},"defaultProvider":"653fd68233d83952fafcd4be"},"providers":{"restrictCreation":{"enabled":false,"allowed":[]},"restrictProviding":{"enabled":false,"allowed":[]}},"skipApproval":{"byBudgetPercentage":{"enabled":false,"amount":null}},"restrictRequests":{"forService":{"settings":{"reservationSchedule":{"enabled":false,"minimum":"","maximum":""},"userCustomParams":{"enabled":false,"params":[]},"geographical":{"enabled":false,"zones":[]},"providers":[]},"enabled":false},"forProviders":{"enabled":false,"settings":[]}},"allowsEdit":{"settings":{"startLocation":true,"endLocation":true,"serviceDate":true,"state":""},"enabled":true},"endServiceLegAutomatically":{"timer":{"amount":5,"unit":"minutes"},"distance":100,"enabled":false,"stopId":null},"enabled":true,"reasons":["Personal"],"hideEstimatedTimes":false,"allowsMultipleDrivers":true,"allowsDistance":true,"_id":"67486d74c789b3f78bf7639e","name":"Taxis Nico","icon":"https://s3.amazonaws.com/allride.odd.icons/odd_taxi_icon.jpg","approvers":[],"entryTimes":[],"exitTimes":[],"notifications":[{"active":true,"_id":"67486d74c789b3f78bf7639f","action":"oDDepartureAccepted"},{"active":true,"_id":"67486d74c789b3f78bf763a0","action":"oDDepartureStart"},{"active":true,"_id":"67486d74c789b3f78bf763a1","action":"oDDepartureEnd"},{"active":true,"_id":"67486d74c789b3f78bf763a2","action":"oDDepartureStopSkiped"},{"active":true,"_id":"67486d74c789b3f78bf763a3","action":"oDDepartureAssigned"},{"active":true,"_id":"67486d74c789b3f78bf763a4","action":"oDDepartureCanceled"},{"active":true,"_id":"67486d74c789b3f78bf763a5","action":"oDDepartureDriverAssigned"},{"active":true,"_id":"67486d74c789b3f78bf763a6","action":"oDDepartureDriverReAssigned"},{"active":true,"_id":"67486d74c789b3f78bf763a7","action":"oDDepartureApproved"}],"legOptions":[],"allowsObservations":true}],"fleetParams":[],"driverParams":[],"auxiliaryTrackers":[],"ui":{},"odd":{"pricing":{"model":"manual","useDistanceForApportioning":false,"zones":[],"costs":[]},"maximumReservationTime":{"amount":1,"unit":"hours"},"minimumReservationTime":{"amount":1,"unit":"hours"},"minimumApprovationAnticipationTime":{"amount":1,"unit":"hours"},"reservationExpirationTime":{"amount":1,"unit":"hours"},"minimumConfirmationTime":{"enabled":false,"amount":1,"unit":"hours"},"startLimit":{"enabled":false,"amount":1,"unit":"hours"},"joinTimeLimit":{"amount":20,"unit":"minutes"},"minimumTimeToAssignDriver":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false,"amount":1,"unit":"hours"},"minimumTimeToAccept":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false,"amount":1,"unit":"hours"},"minimumTimeToStart":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false,"amount":1,"unit":"hours"},"minimumTimeToConfirm":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false,"amount":1,"unit":"hours"},"notifyNewODDRequest":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false},"notifyNewODDCreated":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false},"notifyApprovedODD":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false},"canResume":{"timeLimit":{"enabled":false,"amount":5,"unit":"minutes"},"enabled":false},"pastServicesApproval":{"enabled":false},"validateDeparture":{"enabled":false},"userRequests":{"reasons":{"list":[]}},"providers":{"restrictCreation":{"enabled":false,"allowed":[]}},"skipApproval":{"byBudgetPercentage":{"enabled":false}},"enabled":false,"reasons":[],"hideEstimatedTimes":false,"allowsMultipleDrivers":false,"allowsDistance":false,"exclusive":false,"_id":"6654cc38713b9a5184cfdf7f","entryTimes":[],"exitTimes":[],"legOptions":[],"notifications":[],"approvers":[]},"driverCanCreateRoutes":true,"hideSCDriverNames":false,"startUnassignedDeparture":false,"dashboardAssignation":{"asap":{"minutesTillNextDeparture":360}},"trackersVisibility":[],"visible":true,"continuousGpsAlwaysOn":false,"speedAlert":{"enabled":false,"notify":{"enabled":false,"sendTo":{"adminLevels":[],"emails":[],"roles":[]}}},"notifyPassBudgetPercentage":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]},"percentages":{"general":{"enabled":false,"amount":0,"criteriaToNotify":"oneTime"},"byAccounts":{"enabled":false,"accounts":[]}}},"rateRoute":{"enabled":false,"withValidation":false}},"parking":{"enabled":false,"enableToAllUsers":false,"reservationByDay":false,"allowsScreenshots":false,"reservationModel":"priority","accessModel":"reservation","controlAccessAndExit":true,"usesCarpoolModel":false,"reservationLimit":{"time":1,"unit":"days"},"entryLimit":{"time":15,"unit":"minutes"},"exitLimit":{"time":15,"unit":"minutes"},"noExitLimit":{"time":1,"unit":"hours"},"necessaryTripsForAllDays":2,"necessaryTripsForMinDays":1,"minAvailableDays":3,"maxAvailableDays":5,"ranges":[],"terms":null,"specificLots":{"enabled":false,"lotIds":[]},"lotIdsAndKeysParams":[],"notifyInactiveUsers":{"enabled":false,"days":7},"chatWithoutReservation":false,"showPhoneNumber":false,"usesTickets":false,"usesPasses":false},"carpool":{"boardingConditions":{"enabled":false,"pickupLocationTolerance":200,"boardingTimeWindow":30,"driverPassengerProximity":100,"boardingQueryDelay":5},"emergencyCallSettings":{"enabled":true},"enabled":false,"communityOptions":false,"routePublishingOptions":[],"routeSearchRestrictions":[],"emergencyCall":{"enabled":true}},"cabpool":{"parameters":{"area":null,"originDistrict":null,"destinationDistrict":null,"folio":null,"line":null},"hasSOS":true},"schoolBus":{"enabled":false},"publicBus":{"enabled":true,"visible":true}},"custom":{"privacySettings":{"general":{"hidePersonalInfoForSC":false},"privateBus":{"hideSCDriverNames":false,"hideSCRouteParams":false,"restrictAdmins":{"serviceCost":{"enabled":false,"allowed":"admins","adminIds":[],"adminLevels":[],"roleIds":[]}}}},"hasSubsidy":{"active":false,"subsidizedUsers":[],"userAmount":null,"subsidizedAmount":null},"realTimeTransportSystem":{"buses":{"scheduling":{"enabled":true,"allowSeatReservations":true,"autoAssignReservations":{"enabled":false},"dynamicResourceAssignment":{"enabled":true,"limitTime":5,"limitUnit":"minutes"},"reservation":{"restrictions":{"enabled":false,"amount":1,"time":1,"unit":"days","userSkip":[]}},"minimumConfirmationTime":{"enabled":true,"amount":3,"unit":"minutes"},"minimumTimeToAccept":{"enabled":true,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToStart":{"enabled":false,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToConfirm":{"enabled":false,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToAssignDriver":{"enabled":true,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToAssignVehicle":{"enabled":false,"amount":1,"unit":"hours","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"admin":{"skipAllReservationsAssignedCheck":true},"apportioning":{"enabled":false,"type":"estimated"},"serviceCreationAnticipation":4},"budgetSystem":{"enabled":false},"apportionCategories":[],"labels":["etiqueta1"],"restrictiveLabels":{"enabled":true,"labels":["etiqueta1"]},"oDDServices":[{"enabled":true,"name":"Taxis Nico","icon":"https://s3.amazonaws.com/allride.odd.icons/odd_taxi_icon.jpg","allowsMultipleDrivers":true,"allowsDistance":true,"exclusive":false,"hideEstimatedTimes":false,"pastServicesApproval":{"enabled":true},"pricing":{"model":"manual","useDistanceForApportioning":false,"zones":[],"costs":[],"timeDistanceConfig":{"baseFare":0,"costPerKm":0,"costPerMinute":0,"tolls":[],"additionalCharges":[]}},"reasons":["Personal"],"approvers":[],"entryTimes":[],"exitTimes":[],"maximumReservationTime":{"amount":1,"unit":"minutes"},"minimumReservationTime":{"amount":1,"unit":"minutes"},"reservationExpirationTime":{"amount":1,"unit":"hours"},"minimumApprovationAnticipationTime":{"enabled":false,"amount":1,"unit":"hours"},"minimumConfirmationTime":{"enabled":false,"amount":null,"unit":"hours"},"minimumTimeToAccept":{"enabled":false,"amount":1,"unit":"hours","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToStart":{"enabled":false,"amount":1,"unit":"hours","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToConfirm":{"enabled":false,"amount":1,"unit":"hours","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToAssignDriver":{"enabled":false,"amount":1,"unit":"hours","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToAssignVehicle":{"enabled":false,"amount":1,"unit":"hours","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"notifyNewODDRequest":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"notifyNewODDCreated":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"notifyUnboardedPassengers":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]},"sendAt":"eachStop"},"notifyPassengersWithoutReservation":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]},"sendAt":"eachStop"},"notifySkippedStop":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"notifications":[{"action":"oDDepartureAccepted","active":true},{"action":"oDDepartureStart","active":true},{"action":"oDDepartureEnd","active":true},{"action":"oDDepartureStopSkiped","active":true},{"action":"oDDepartureAssigned","active":true},{"action":"oDDepartureCanceled","active":true},{"action":"oDDepartureDriverAssigned","active":true},{"action":"oDDepartureDriverReAssigned","active":true},{"action":"oDDepartureApproved","active":true}],"userRequests":{"freeRequests":{"enabled":true,"asap":false},"limitedOptions":{"enabled":false},"joinDepartures":{"enabled":true,"maxCapacity":5,"distanceRatio":0},"defaultProvider":"653fd68233d83952fafcd4be","emergencyRequests":{"enabled":false},"exclusiveRequests":{"enabled":false},"multipleRequests":{"enabled":false,"amountLimit":0},"reasons":{"enabled":false,"list":[]}},"restrictRequests":{"forService":{"enabled":false,"settings":{"reservationSchedule":{"enabled":false,"minimum":"","maximum":""},"userCustomParams":{"enabled":false,"params":[]},"geographical":{"enabled":false,"zones":[]}}},"forProviders":{"enabled":false,"settings":[]}},"providers":{"restrictCreation":{"enabled":false,"allowed":[]},"restrictProviding":{"enabled":false,"allowed":[]}},"skipApproval":{"byBudgetPercentage":{"enabled":false,"amount":null}},"legOptions":[],"allowsObservations":true,"allowsEdit":{"enabled":true,"settings":{"startLocation":true,"endLocation":true,"serviceDate":true,"state":""}},"endServiceLegAutomatically":{"enabled":false,"stopId":null,"distance":100,"timer":{"amount":5,"unit":"minutes"}}}],"oDDSettings":{"joinNewAdminODDs":true,"enableToNewUsers":{"enabled":true,"specificParams":{"enabled":false,"params":[]}}},"allowsRating":true,"allowsScreenshots":true,"snapshots":{"service":{"enabled":true,"retentionTime":{"amount":0,"unit":"hours"}},"nonService":{"enabled":true,"retentionTime":{"amount":0,"unit":"hours"}}},"allowGenericVehicles":true,"usesPin":false,"validation":{"enabled":true,"timestamp":{"enabled":true,"allowsSkip":true},"dailyLimit":{"enabled":false,"allowsSkip":false,"amount":0},"timeLimit":{"enabled":false,"allowsSkip":false,"amount":1,"time":1,"unit":"minutes"},"departureLimit":{"enabled":false,"allowsSkip":false,"amount":0},"allowsStatic":false,"usesTickets":true,"usesPasses":true,"ticketPrice":100,"customValidation":{"enabled":true,"name":"rut","description":"rut"},"customValidationParams":{"driverParams":[],"passengerParams":[],"maxValidationTime":{"amount":1,"unit":"hours"}},"validationToken":"","usesInternalNFC":false,"bCValidation":{"enabled":true,"field":""},"customQRValidation":{"enabled":true,"field":"Rut"},"DNIValidation":{"enabled":true,"field":"rut","allowsExternal":true},"external":[]},"assistant":{"enabled":false,"entryTimes":[],"departureTimes":[],"collecting":false,"description":""},"harassmentAssistanceSettings":{"enabled":true,"showTextAbove":true,"aboveText":"","showInformation":true,"informationText":""},"harassmentAssistance":true,"healthPoll":{"enabled":false,"askUser":false},"custom":{"driverApp":{"visibleCode":"plate"},"passengerApp":{"visibleCode":"plate"},"reports":{"visibleCode":"plate"}},"internalLegs":{"enabled":false},"fleetParams":[],"departureHourFulfillment":{"enabled":false,"ranges":[]},"arrivalHourFulfillment":{"enabled":false,"ranges":[]},"auxiliaryTrackers":[],"startUnassignedDeparture":false,"validateDeparture":{"enabled":true},"dashboardAssignation":{"asap":{"minutesTillNextDeparture":360}},"passengerList":{"enabled":false,"data":{"fullName":false,"validationParam":false,"phone":false,"community":false}},"notifyPassBudgetPercentage":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]},"percentages":{"general":{"enabled":false,"amount":0,"criteriaToNotify":"oneTime"},"byAccounts":{"enabled":false,"accounts":[]}}},"userApp":{"allowsMultipleReservations":{"enabled":true,"amountLimit":0}},"routeDeviation":{"maxDistance":100,"maxTime":5,"enabled":false,"notify":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}}}},"carpool":{"boardingConditions":{"enabled":false,"pickupLocationTolerance":200,"boardingTimeWindow":30,"driverPassengerProximity":100,"boardingQueryDelay":5},"emergencyCallSettings":{"enabled":true},"enabled":false,"communityOptions":false,"routePublishingOptions":[],"routeSearchRestrictions":[],"emergencyCall":{"enabled":true}},"cabpool":{"parameters":{"area":null,"originDistrict":null,"destinationDistrict":null,"folio":null,"line":null},"hasSOS":true},"schoolbus":{"enabled":false}},"validationParams":{"allowMultipleUseValidationCodes":false,"forceMandatoryParams":false,"params":[{"mandatory":true,"check":true,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a66","name":"rut","description":"rut","dataType":"rut","isUserStop":false,"validationExpr":""},{"mandatory":false,"check":false,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a67","name":"address","description":"Domicilio","dataType":"location","isUserStop":true,"validationExpr":""},{"mandatory":false,"check":false,"show":false,"private":true,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a68","name":"coordinates","description":"Coordenadas","dataType":"coordinates","isUserStop":true,"validationExpr":""},{"mandatory":true,"check":true,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a69","name":"Color","description":"","dataType":"string","isUserStop":false,"validationExpr":""},{"mandatory":true,"check":true,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a6a","name":"Animal","description":"","dataType":"string","isUserStop":false,"validationExpr":""}],"enabled":true},"parkingLots":{"enabled":false,"enableToAllUsers":false,"reservationByDay":false,"allowsScreenshots":false,"reservationModel":"priority","accessModel":"reservation","controlAccessAndExit":true,"usesCarpoolModel":false,"reservationLimit":{"time":1,"unit":"days"},"entryLimit":{"time":15,"unit":"minutes"},"exitLimit":{"time":15,"unit":"minutes"},"noExitLimit":{"time":1,"unit":"hours"},"necessaryTripsForAllDays":2,"necessaryTripsForMinDays":1,"minAvailableDays":3,"maxAvailableDays":5,"ranges":[],"terms":null,"specificLots":{"enabled":false,"lotIds":[]},"lotIdsAndKeysParams":[],"notifyInactiveUsers":{"enabled":false,"days":7},"chatWithoutReservation":false,"showPhoneNumber":false,"usesTickets":false,"usesPasses":false},"balance":{"enabled":true},"betaFeatures":[],"allowsManualUsers":true,"replacesManualUser":false,"allowAds":true,"allowCustomEmail":false,"allowCustomId":false,"hasUserMessagingSystem":true,"driverCanCreateRoutes":true,"products":{"enabled":true}},"emailSuffixes":[],"admins":[],"timezone":"Chile/Continental","type":"normal","distance":0,"allowAds":false,"assocCommunities":[],"public":true,"name":"Comunidad Automatización 2","site":"http://adminstage.allrideapp.com","terms":null,"country":"cl","isStudentsCommunity":false,"hasBusesSystem":true,"language":"es","avatar":"https://s3.amazonaws.com/allride.uploads/communityAvatar_6654ae4eba54fe502d4e4187_1717603083265.png","badge":"https://s3.amazonaws.com/allride.uploads/communityAvatar_6654ae4eba54fe502d4e4187_1717603083787.png","createdAt":"2024-05-27T16:01:18.808Z","updatedAt":"2024-11-28T13:17:41.077Z","__v":391}
    ...    headers=${headers}
    # Verifica el código de estado esperado (puedes ajustarlo según tus expectativas)
    ${code}=    convert to string    ${response.status_code}
    Status Should Be    200
    Log    ${code}

Modify Route (Visibility Allow to User and create new service)
    Create Session    mysesion    ${STAGE_URL}    verify=true

    # Define la URL del recurso que requiere autenticación (puedes ajustarla según tus necesidades)

    # Configura las opciones de la solicitud (headers, auth)
    ${headers}=    Create Dictionary
    ...    Authorization=${tokenAdmin}
    ...    Content-Type=application/json
    # Realiza la solicitud GET en la sesión por defecto
    ${response}=    PUT On Session
    ...    mysesion
    ...    url=api/v1/admin/pb/routes/66cc94821125fb1232f990a1?community=6654ae4eba54fe502d4e4187
    ...    data={"_id":"66cc94821125fb1232f990a1","trail":{"enabled":true,"adjustByRounds":false},"rounds":{"enabled":false,"anchorStops":[]},"notifyUsersByStop":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false},"notifyUnboardedPassengers":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false},"notifySkippedStop":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false},"excludePassengers":{"active":false,"excludeType":"dontHide"},"scheduling":{"enabled":true,"limitUnit":"minutes","limitAmount":30,"lateNotification":{"enabled":false,"amount":0,"unit":"minutes"},"stopNotification":{"enabled":false,"amount":0,"unit":"minutes"},"startLimit":{"upperLimit":{"amount":60,"unit":"minutes"},"lowerLimit":{"amount":30,"unit":"minutes"}},"defaultServiceCost":null,"schedule":[{"enabled":true,"day":"mon","time":"16:00","estimatedArrival":null,"capped":{"enabled":false,"capacity":0},"vehicleCategoryId":null,"restrictPassengers":{"enabled":false,"visibility":{"enabled":false,"excludes":false,"parameters":[]},"reservation":{"enabled":false,"excludes":false,"parameters":[]},"validation":{"enabled":false,"excludes":false,"parameters":[]}},"serviceCost":0,"observations":"","reservations":{"enabled":false,"list":[]},"stopSchedule":[],"defaultResources":[],"_ogIndex":0},{"enabled":true,"day":"tue","time":"16:00","estimatedArrival":null,"capped":{"enabled":false,"capacity":0},"vehicleCategoryId":null,"restrictPassengers":{"enabled":false,"visibility":{"enabled":false,"excludes":false,"parameters":[]},"reservation":{"enabled":false,"excludes":false,"parameters":[]},"validation":{"enabled":false,"excludes":false,"parameters":[]}},"serviceCost":0,"observations":"","reservations":{"enabled":false,"list":[]},"stopSchedule":[],"defaultResources":[],"_ogIndex":1},{"enabled":true,"day":"wed","time":"16:00","estimatedArrival":null,"capped":{"enabled":false,"capacity":0},"vehicleCategoryId":null,"restrictPassengers":{"enabled":false,"visibility":{"enabled":false,"excludes":false,"parameters":[]},"reservation":{"enabled":false,"excludes":false,"parameters":[]},"validation":{"enabled":false,"excludes":false,"parameters":[]}},"serviceCost":0,"observations":"","reservations":{"enabled":false,"list":[]},"stopSchedule":[],"defaultResources":[],"_ogIndex":2},{"enabled":true,"day":"thu","time":"16:00","estimatedArrival":null,"capped":{"enabled":false,"capacity":0},"vehicleCategoryId":null,"restrictPassengers":{"enabled":false,"visibility":{"enabled":false,"excludes":false,"parameters":[]},"reservation":{"enabled":false,"excludes":false,"parameters":[]},"validation":{"enabled":false,"excludes":false,"parameters":[]}},"serviceCost":0,"observations":"","reservations":{"enabled":false,"list":[]},"stopSchedule":[],"defaultResources":[],"_ogIndex":3},{"enabled":true,"day":"fri","time":"16:00","estimatedArrival":null,"capped":{"enabled":false,"capacity":0},"vehicleCategoryId":null,"restrictPassengers":{"enabled":false,"visibility":{"enabled":false,"excludes":false,"parameters":[]},"reservation":{"enabled":false,"excludes":false,"parameters":[]},"validation":{"enabled":false,"excludes":false,"parameters":[]}},"serviceCost":0,"observations":"","reservations":{"enabled":false,"list":[]},"stopSchedule":[],"defaultResources":[],"_ogIndex":4},{"enabled":true,"day":"sat","time":"16:00","estimatedArrival":null,"capped":{"enabled":false,"capacity":0},"vehicleCategoryId":null,"restrictPassengers":{"enabled":false,"visibility":{"enabled":false,"excludes":false,"parameters":[]},"reservation":{"enabled":false,"excludes":false,"parameters":[]},"validation":{"enabled":false,"excludes":false,"parameters":[]}},"serviceCost":0,"observations":"","reservations":{"enabled":false,"list":[]},"stopSchedule":[],"defaultResources":[],"_ogIndex":5},{"enabled":true,"day":"sun","time":"16:00","estimatedArrival":null,"capped":{"enabled":false,"capacity":0},"vehicleCategoryId":null,"restrictPassengers":{"enabled":false,"visibility":{"enabled":false,"excludes":false,"parameters":[]},"reservation":{"enabled":false,"excludes":false,"parameters":[]},"validation":{"enabled":false,"excludes":false,"parameters":[]}},"serviceCost":0,"observations":"","reservations":{"enabled":false,"list":[]},"stopSchedule":[],"defaultResources":[],"_ogIndex":6}],"stopOnReservation":false,"restrictions":{"customParams":{"enabled":false,"params":[]}},"reservations":{"enabled":false,"list":[]}},"endDepartureNotice":{"enabled":false,"lastStop":null},"restrictPassengers":{"enabled":true,"allowed":["66cc94821125fb1232f990a1"],"visibility":{"enabled":true,"excludes":true,"parameters":[{"key":"Color","values":["Azul"]}]},"reservation":{"enabled":false,"excludes":false,"parameters":[]},"validation":{"enabled":false,"excludes":false,"parameters":[]}},"snapshots":{"enabled":false},"validationParams":{"enabled":false,"driverParams":[],"passengerParams":[]},"canResume":{"timeLimit":{"enabled":false,"amount":5,"unit":"minutes"},"enabled":false},"departureHourFulfillment":{"enabled":false,"ranges":[]},"arrivalHourFulfillment":{"enabled":false,"ranges":[]},"validateDeparture":{"enabled":true},"minimumConfirmationTime":{"enabled":false,"amount":1,"unit":"hours"},"endServiceLegAutomatically":{"timer":{"amount":5,"unit":"minutes"},"distance":100},"assistantIds":[],"superCommunities":["653fd68233d83952fafcd4be"],"communities":["6654ae4eba54fe502d4e4187"],"active":true,"visible":true,"internal":false,"anchorStops":[],"isStatic":false,"labels":[],"hasExternalGPS":false,"hasCapacity":false,"hasBeacons":false,"hasRounds":false,"hasBoardingCount":false,"hasUnboardingCount":false,"usesBusCode":false,"usesVehicleList":true,"dynamicSeatAssignment":true,"usesDriverCode":false,"usesDriverPin":false,"usesTickets":false,"usesPasses":false,"usesTextToSpeech":false,"allowsManualValidation":true,"allowsRating":true,"allowsOnlyExistingDrivers":false,"allowsMultipleDrivers":false,"allowsDebugging":false,"startsOnStop":false,"notNearStop":false,"allowsNonServiceSnapshots":false,"allowsServiceSnapshots":false,"allowsDistance":true,"usesOfflineCount":false,"hasBoardings":false,"hasUnboardings":false,"usesManualSeat":false,"noPassengerInfo":false,"showParable":false,"showStops":true,"allowGenericVehicles":true,"usesVehicleQRLink":false,"skipDeclaration":false,"skipQRValidation":false,"name":"Ruta Restricciones RF","shapeId":"6654d532713b9a5184cfe2e3","description":"Probar distintos casos de restricciones de manera automatizada","extraInfo":"","color":"712a2a","legOptions":[],"ownerIds":[{"_id":"66cc94821125fb1232f990a5","id":"6654ae4eba54fe502d4e4187","role":"community"}],"segments":[],"roundOrder":[],"communityId":"6654ae4eba54fe502d4e4187","timeOnRoute":14,"distance":9,"distanceInMeters":8784,"originStop":"6654d4acba54fe502d4e6b6b","destinationStop":"6654d4c8713b9a5184cfe1df","customParams":{"enabled":false,"params":[]},"customParamsAtTheEnd":{"enabled":false,"params":[]},"createdAt":"2024-08-26T14:43:15.040Z","updatedAt":"2024-08-26T16:12:30.007Z","__v":9,"superCommunityId":"653fd68233d83952fafcd4be","routeCost":0,"ticketCost":0}
    ...    headers=${headers}
    # Verifica el código de estado esperado (puedes ajustarlo según tus expectativas)
    ${code}=    convert to string    ${response.status_code}
    Status Should Be    200
    Log    ${code}

Login User With Email(Color Azul)
    Create Session    mysesion    ${STAGE_URL}    verify=true
    # Define la URL del recurso que requiere autenticación (puedes ajustarla según tus necesidades)
    # Configura las opciones de la solicitud (headers, auth)
    ${jsonBody}=    Set Variable    {"username":"nicolas+comunidad2@allrideapp.com","password":"Lolowerty21@"}
    ${parsed_json}=    Evaluate    json.loads($jsonBody)    json
    ${headers}=    Create Dictionary    Authorization=""    Content-Type=application/json
    # Realiza la solicitud GET en la sesión por defecto
    ${response}=    Post On Session
    ...    mysesion
    ...    url=${loginUserUrl}
    ...    json=${parsed_json}
    ...    headers=${headers}
    # Verifica el código de estado esperado (puedes ajustarlo según tus expectativas)
    ${code}=    convert to string    ${response.status_code}
    Should Be Equal As Numbers    ${code}    200
    Log    ${code}

    ${accessToken}=    Set Variable    ${response.json()}[accessToken]
    ${accessTokenNico}=    Evaluate    "Bearer ${accessToken}"
    Set Global Variable    ${accessTokenNico}

Login User 2 (Sin color)
    

    Create Session    mysesion    ${STAGE_URL}    verify=true
    # Define la URL del recurso que requiere autenticación (puedes ajustarla según tus necesidades)
    # Configura las opciones de la solicitud (headers, auth)
    ${jsonBody}=    Set Variable    {"username":"nicolas+usuario2comunidad2@allrideapp.com","password":"Lolowerty21@"}
    ${parsed_json}=    Evaluate    json.loads($jsonBody)    json
    ${headers}=    Create Dictionary    Authorization=""    Content-Type=application/json
    # Realiza la solicitud GET en la sesión por defecto
    ${response}=    Post On Session
    ...    mysesion
    ...    url=${loginUserUrl}
    ...    json=${parsed_json}
    ...    headers=${headers}
    # Verifica el código de estado esperado (puedes ajustarlo según tus expectativas)
    ${code}=    convert to string    ${response.status_code}
    Should Be Equal As Numbers    ${code}    200
    Log    ${code}

    ${accessToken}=    Set Variable    ${response.json()}[accessToken]
    ${accessTokenUser2}=    Evaluate    "Bearer ${accessToken}"
    Set Global Variable    ${accessTokenUser2}

##-------------------RUTA RESTRICCIONES RF VISTA EXPLORAR------------------------##

Get Routes and Check "Restricciones RF" Not Present Nico
    # Define la URL del recurso que requiere autenticación (puedes ajustarla según tus necesidades)
    ${url}=    Set Variable    https://stage.allrideapp.com/api/v1/pb/user/routes/all/6654ae4eba54fe502d4e4187

    # Configura las opciones de la solicitud (headers, auth)
    &{headers}=    Create Dictionary    Authorization=${accessTokenNico}

    # Realiza la solicitud GET en la sesión por defecto
    ${response}=    GET    url=${url}    headers=${headers}

    Should Be Equal As Numbers    ${response.status_code}    200

    # Almacenamos la respuesta de json en una variable para poder trabajar con ella
    ${responseJson}=    Set Variable    ${response.json()}

    # Extraemos los nombres de las rutas
    ${route_names}=    Evaluate    [route['name'] for route in ${responseJson}]    json

    # Verificamos que "Restricciones RF" no esté en la lista de rutas
    Should not Contain    ${route_names}    Ruta Restricciones RF    Ruta Restricciones RF was found despite the user allowed

    Log    "Verification passed: 'Ruta Restricciones RF' not found in routes"


Get Routes and Check "Restricciones RF" Present User2
    # Define la URL del recurso que requiere autenticación (puedes ajustarla según tus necesidades)
    ${url}=    Set Variable    https://stage.allrideapp.com/api/v1/pb/user/routes/all/6654ae4eba54fe502d4e4187

    # Configura las opciones de la solicitud (headers, auth)
    &{headers}=    Create Dictionary    Authorization=${accessTokenUser2}

    # Realiza la solicitud GET en la sesión por defecto
    ${response}=    GET    url=${url}    headers=${headers}

    Should Be Equal As Numbers    ${response.status_code}    200

    # Almacenamos la respuesta de json en una variable para poder trabajar con ella
    ${responseJson}=    Set Variable    ${response.json()}

    # Extraemos los nombres de las rutas
    ${route_names}=    Evaluate    [route['name'] for route in ${responseJson}]    json

    # Verificamos que "Restricciones RF" no esté en la lista de rutas
    Should Contain    ${route_names}    Ruta Restricciones RF    Ruta Restricciones RF was not found

#---Buscar un servicio con el id de la ruta para poder hacer una reservacion exitosa, servicio debe ser pasado----#


Modify community (With External validation)
    Create Session    mysesion    ${STAGE_URL}    verify=true

    # Define la URL del recurso que requiere autenticación (puedes ajustarla según tus necesidades)

    # Configura las opciones de la solicitud (headers, auth)
    ${headers}=    Create Dictionary
    ...    Authorization=${tokenAdmin}
    ...    Content-Type=application/json
    # Realiza la solicitud GET en la sesión por defecto
    ${response}=    PUT On Session
    ...    mysesion
    ...    url=api/v1/admin/community/6654ae4eba54fe502d4e4187
    ...    data={"_id":"6654ae4eba54fe502d4e4187","config":{"general":{"hasSubsidy":{"active":false,"subsidizedUsers":[],"userAmount":null,"subsidizedAmount":null},"validationParams":{"allowMultipleUseValidationCodes":false,"forceMandatoryParams":false,"params":[{"mandatory":true,"check":true,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a66","name":"rut","description":"rut","dataType":"rut","isUserStop":false,"validationExpr":""},{"mandatory":false,"check":false,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a67","name":"address","description":"Domicilio","dataType":"location","isUserStop":true,"validationExpr":""},{"mandatory":false,"check":false,"show":false,"private":true,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a68","name":"coordinates","description":"Coordenadas","dataType":"coordinates","isUserStop":true,"validationExpr":""},{"mandatory":true,"check":true,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a69","name":"Color","description":"","dataType":"string","isUserStop":false,"validationExpr":""},{"mandatory":true,"check":true,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a6a","name":"Animal","description":"","dataType":"string","isUserStop":false,"validationExpr":""}],"enabled":true},"balance":{"enabled":true},"betaFeatures":[],"allowsManualUsers":true,"replacesManualUser":false,"allowAds":true,"allowCustomEmail":false,"allowCustomId":false,"hasUserMessagingSystem":true,"public":true,"assocCommunities":[],"hidePersonalInfoForSC":false,"ui":{},"privacySettings":{"general":{"hidePersonalInfoForSC":false},"privateBus":{"hideSCDriverNames":false,"hideSCRouteParams":false,"restrictAdmins":{"serviceCost":{"enabled":false,"allowed":"admins","adminIds":[],"adminLevels":[],"roleIds":[]}}}},"products":{"enabled":true},"allowsValidationOptions":false,"allowsCustomJoinWithoutEmailCheck":false},"privateBus":{"userApp":{"allowsMultipleReservations":{"enabled":true,"amountLimit":0}},"oDDSettings":{"joinNewAdminODDs":true,"enableToNewUsers":{"enabled":true,"specificParams":{"enabled":false,"params":[]}}},"scheduling":{"enabled":true,"allowSeatReservations":true,"autoAssignReservations":{"enabled":false},"dynamicResourceAssignment":{"enabled":true,"limitTime":5,"limitUnit":"minutes"},"reservation":{"restrictions":{"enabled":false,"amount":1,"time":1,"unit":"days","userSkip":[]},"enabled":false},"minimumConfirmationTime":{"enabled":true,"amount":3,"unit":"minutes"},"minimumTimeToAccept":{"enabled":true,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[]}},"minimumTimeToStart":{"enabled":false,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[]}},"minimumTimeToConfirm":{"enabled":false,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[]}},"minimumTimeToAssignDriver":{"enabled":true,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[]}},"admin":{"skipAllReservationsAssignedCheck":true},"apportioning":{"enabled":false,"type":"estimated"},"serviceCreationAnticipation":4},"budgetSystem":{"enabled":false},"restrictiveLabels":{"enabled":true,"labels":["etiqueta1"]},"validation":{"timestamp":{"userSkip":[],"enabled":true,"allowsSkip":true},"dailyLimit":{"userSkip":[],"enabled":false,"allowsSkip":false,"amount":0},"timeLimit":{"userSkip":[],"enabled":false,"allowsSkip":false,"amount":1,"time":1,"unit":"minutes"},"departureLimit":{"userSkip":[],"enabled":false,"allowsSkip":false,"amount":0},"DNIValidation":{"enabled":true,"field":"rut","allowsExternal":true},"bCValidation":{"enabled":true,"field":""},"customQRValidation":{"enabled":true,"field":"Rut"},"secureNFCValidation":{"enabled":false},"customValidation":{"enabled":true,"dataType":"text","options":[],"name":"rut","description":"rut"},"customValidationParams":{"driverParams":[],"passengerParams":[]},"usesInternalNFC":false,"validationToken":"","healthPoll":false,"enabled":true,"allowsStatic":false,"usesTickets":true,"ticketPrice":100,"usesPasses":true,"external":[]},"assistant":{"entryTimes":[],"departureTimes":[],"enabled":false,"collecting":false,"description":""},"poll":{"active":false,"answeredBy":[]},"snapshots":{"service":{"enabled":true,"retentionTime":{"amount":0,"unit":"hours"}},"nonService":{"enabled":false}},"harassmentAssistanceSettings":{"enabled":true,"showTextAbove":true,"aboveText":"","showInformation":true,"informationText":""},"healthPoll":{"enabled":false,"askUser":false},"passengerList":{"data":{"fullName":false,"validationParam":false,"phone":false,"community":false},"enabled":false},"reports":{"visibleCode":"plate"},"driverApp":{"visibleCode":"plate","allowsReuseVehicles":true},"passengerApp":{"visibleCode":"plate"},"multipleUseQRCodes":{"enabled":false,"uncapped":false,"amount":1},"internalRoutes":{"enabled":false},"internalLegs":{"enabled":false},"emergencyCall":{"enabled":true},"departureHourFulfillment":{"enabled":false,"ranges":[]},"arrivalHourFulfillment":{"enabled":false,"ranges":[]},"validateDeparture":{"enabled":true},"restrictRTL":{"enabled":false},"emergencyCallSettings":{"enabled":true},"enabled":true,"apportionCategories":[],"labels":["etiqueta1"],"allowsRating":true,"allowsSnapshots":false,"allowsScreenshots":true,"usesPin":false,"noPassengerInfo":false,"allowGenericVehicles":true,"oDDServices":[{"pricing":{"timeDistanceConfig":{"baseFare":0,"costPerKm":0,"costPerMinute":0,"tolls":[],"additionalCharges":[]},"model":"manual","useDistanceForApportioning":false,"zones":[],"costs":[]},"maximumReservationTime":{"amount":1,"unit":"minutes"},"minimumReservationTime":{"amount":1,"unit":"minutes"},"minimumApprovationAnticipationTime":{"amount":1,"unit":"hours","enabled":false},"reservationExpirationTime":{"amount":1,"unit":"hours"},"minimumConfirmationTime":{"enabled":false,"amount":null,"unit":"hours"},"startLimit":{"enabled":false,"amount":1,"unit":"hours"},"joinTimeLimit":{"amount":20,"unit":"minutes"},"minimumTimeToAssignDriver":{"sendTo":{"emails":[],"adminLevels":[],"roleIds":[],"destinataries":"admins"},"enabled":false,"amount":1,"unit":"hours"},"minimumTimeToAccept":{"sendTo":{"emails":[],"adminLevels":[],"roleIds":[],"destinataries":"admins"},"enabled":false,"amount":1,"unit":"hours"},"minimumTimeToStart":{"sendTo":{"emails":[],"adminLevels":[],"roleIds":[],"destinataries":"admins"},"enabled":false,"amount":1,"unit":"hours"},"minimumTimeToConfirm":{"sendTo":{"emails":[],"adminLevels":[],"roleIds":[],"destinataries":"admins"},"enabled":false,"amount":1,"unit":"hours"},"notifyNewODDRequest":{"sendTo":{"emails":[],"adminLevels":[],"roles":[],"destinataries":"admins"},"enabled":false},"notifyNewODDCreated":{"sendTo":{"emails":[],"adminLevels":[],"roles":[],"destinataries":"admins"},"enabled":false},"notifyApprovedODD":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false},"notifyUnboardedPassengers":{"sendTo":{"emails":[],"adminLevels":[],"roles":[],"destinataries":"admins"},"enabled":false,"sendAt":"eachStop"},"notifyPassengersWithoutReservation":{"sendTo":{"emails":[],"adminLevels":[],"roles":[],"destinataries":"admins"},"enabled":false,"sendAt":"eachStop"},"notifySkippedStop":{"sendTo":{"emails":[],"adminLevels":[],"roles":[],"destinataries":"admins"},"enabled":false},"notifyAdmins":{"minimumTimeToAssignVehicle":{"sendTo":{"emails":[],"adminLevels":[],"roleIds":[]},"enabled":false,"amount":1,"unit":"hours"}},"canResume":{"timeLimit":{"enabled":false,"amount":5,"unit":"minutes"},"enabled":false},"pastServicesApproval":{"enabled":true},"validateDeparture":{"enabled":false},"userRequests":{"freeRequests":{"enabled":true,"asap":false},"emergencyRequests":{"enabled":false},"exclusiveRequests":{"enabled":false},"limitedOptions":{"enabled":false},"multipleRequests":{"enabled":false,"amountLimit":0},"joinDepartures":{"enabled":true,"maxCapacity":5,"distanceRatio":0},"reasons":{"list":[],"enabled":false},"defaultProvider":"653fd68233d83952fafcd4be"},"providers":{"restrictCreation":{"enabled":false,"allowed":[]},"restrictProviding":{"enabled":false,"allowed":[]}},"skipApproval":{"byBudgetPercentage":{"enabled":false,"amount":null}},"restrictRequests":{"forService":{"settings":{"reservationSchedule":{"enabled":false,"minimum":"","maximum":""},"userCustomParams":{"enabled":false,"params":[]},"geographical":{"enabled":false,"zones":[]},"providers":[]},"enabled":false},"forProviders":{"enabled":false,"settings":[]}},"allowsEdit":{"settings":{"startLocation":true,"endLocation":true,"serviceDate":true,"state":""},"enabled":true},"endServiceLegAutomatically":{"timer":{"amount":5,"unit":"minutes"},"distance":100,"enabled":false,"stopId":null},"enabled":true,"reasons":["Personal"],"hideEstimatedTimes":false,"allowsMultipleDrivers":true,"allowsDistance":true,"_id":"67487c14f5f6ec8cacaaa645","name":"Taxis Nico","icon":"https://s3.amazonaws.com/allride.odd.icons/odd_taxi_icon.jpg","approvers":[],"entryTimes":[],"exitTimes":[],"notifications":[{"active":true,"_id":"67487c14f5f6ec8cacaaa646","action":"oDDepartureAccepted"},{"active":true,"_id":"67487c14f5f6ec8cacaaa647","action":"oDDepartureStart"},{"active":true,"_id":"67487c14f5f6ec8cacaaa648","action":"oDDepartureEnd"},{"active":true,"_id":"67487c14f5f6ec8cacaaa649","action":"oDDepartureStopSkiped"},{"active":true,"_id":"67487c14f5f6ec8cacaaa64a","action":"oDDepartureAssigned"},{"active":true,"_id":"67487c14f5f6ec8cacaaa64b","action":"oDDepartureCanceled"},{"active":true,"_id":"67487c14f5f6ec8cacaaa64c","action":"oDDepartureDriverAssigned"},{"active":true,"_id":"67487c14f5f6ec8cacaaa64d","action":"oDDepartureDriverReAssigned"},{"active":true,"_id":"67487c14f5f6ec8cacaaa64e","action":"oDDepartureApproved"}],"legOptions":[],"allowsObservations":true}],"fleetParams":[],"driverParams":[],"auxiliaryTrackers":[],"ui":{},"odd":{"pricing":{"model":"manual","useDistanceForApportioning":false,"zones":[],"costs":[]},"maximumReservationTime":{"amount":1,"unit":"hours"},"minimumReservationTime":{"amount":1,"unit":"hours"},"minimumApprovationAnticipationTime":{"amount":1,"unit":"hours"},"reservationExpirationTime":{"amount":1,"unit":"hours"},"minimumConfirmationTime":{"enabled":false,"amount":1,"unit":"hours"},"startLimit":{"enabled":false,"amount":1,"unit":"hours"},"joinTimeLimit":{"amount":20,"unit":"minutes"},"minimumTimeToAssignDriver":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false,"amount":1,"unit":"hours"},"minimumTimeToAccept":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false,"amount":1,"unit":"hours"},"minimumTimeToStart":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false,"amount":1,"unit":"hours"},"minimumTimeToConfirm":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false,"amount":1,"unit":"hours"},"notifyNewODDRequest":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false},"notifyNewODDCreated":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false},"notifyApprovedODD":{"sendTo":{"emails":[],"adminLevels":[],"roles":[]},"enabled":false},"canResume":{"timeLimit":{"enabled":false,"amount":5,"unit":"minutes"},"enabled":false},"pastServicesApproval":{"enabled":false},"validateDeparture":{"enabled":false},"userRequests":{"reasons":{"list":[]}},"providers":{"restrictCreation":{"enabled":false,"allowed":[]}},"skipApproval":{"byBudgetPercentage":{"enabled":false}},"enabled":false,"reasons":[],"hideEstimatedTimes":false,"allowsMultipleDrivers":false,"allowsDistance":false,"exclusive":false,"_id":"6654cc38713b9a5184cfdf7f","entryTimes":[],"exitTimes":[],"legOptions":[],"notifications":[],"approvers":[]},"driverCanCreateRoutes":true,"hideSCDriverNames":false,"startUnassignedDeparture":false,"dashboardAssignation":{"asap":{"minutesTillNextDeparture":360}},"trackersVisibility":[],"visible":true,"continuousGpsAlwaysOn":false,"speedAlert":{"enabled":false,"notify":{"enabled":false,"sendTo":{"adminLevels":[],"emails":[],"roles":[]}}},"notifyPassBudgetPercentage":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]},"percentages":{"general":{"enabled":false,"amount":0,"criteriaToNotify":"oneTime"},"byAccounts":{"enabled":false,"accounts":[]}}},"rateRoute":{"enabled":false,"withValidation":false}},"parking":{"enabled":false,"enableToAllUsers":false,"reservationByDay":false,"allowsScreenshots":false,"reservationModel":"priority","accessModel":"reservation","controlAccessAndExit":true,"usesCarpoolModel":false,"reservationLimit":{"time":1,"unit":"days"},"entryLimit":{"time":15,"unit":"minutes"},"exitLimit":{"time":15,"unit":"minutes"},"noExitLimit":{"time":1,"unit":"hours"},"necessaryTripsForAllDays":2,"necessaryTripsForMinDays":1,"minAvailableDays":3,"maxAvailableDays":5,"ranges":[],"terms":null,"specificLots":{"enabled":false,"lotIds":[]},"lotIdsAndKeysParams":[],"notifyInactiveUsers":{"enabled":false,"days":7},"chatWithoutReservation":false,"showPhoneNumber":false,"usesTickets":false,"usesPasses":false},"carpool":{"boardingConditions":{"enabled":false,"pickupLocationTolerance":200,"boardingTimeWindow":30,"driverPassengerProximity":100,"boardingQueryDelay":5},"emergencyCallSettings":{"enabled":true},"enabled":false,"communityOptions":false,"routePublishingOptions":[],"routeSearchRestrictions":[],"emergencyCall":{"enabled":true}},"cabpool":{"parameters":{"area":null,"originDistrict":null,"destinationDistrict":null,"folio":null,"line":null},"hasSOS":true},"schoolBus":{"enabled":false},"publicBus":{"enabled":true,"visible":true}},"custom":{"privacySettings":{"general":{"hidePersonalInfoForSC":false},"privateBus":{"hideSCDriverNames":false,"hideSCRouteParams":false,"restrictAdmins":{"serviceCost":{"enabled":false,"allowed":"admins","adminIds":[],"adminLevels":[],"roleIds":[]}}}},"hasSubsidy":{"active":false,"subsidizedUsers":[],"userAmount":null,"subsidizedAmount":null},"realTimeTransportSystem":{"buses":{"scheduling":{"enabled":true,"allowSeatReservations":true,"autoAssignReservations":{"enabled":false},"dynamicResourceAssignment":{"enabled":true,"limitTime":5,"limitUnit":"minutes"},"reservation":{"restrictions":{"enabled":false,"amount":1,"time":1,"unit":"days","userSkip":[]}},"minimumConfirmationTime":{"enabled":true,"amount":3,"unit":"minutes"},"minimumTimeToAccept":{"enabled":true,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToStart":{"enabled":false,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToConfirm":{"enabled":false,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToAssignDriver":{"enabled":true,"amount":30,"unit":"minutes","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToAssignVehicle":{"enabled":false,"amount":1,"unit":"hours","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"admin":{"skipAllReservationsAssignedCheck":true},"apportioning":{"enabled":false,"type":"estimated"},"serviceCreationAnticipation":4},"budgetSystem":{"enabled":false},"apportionCategories":[],"labels":["etiqueta1"],"restrictiveLabels":{"enabled":true,"labels":["etiqueta1"]},"oDDServices":[{"enabled":true,"name":"Taxis Nico","icon":"https://s3.amazonaws.com/allride.odd.icons/odd_taxi_icon.jpg","allowsMultipleDrivers":true,"allowsDistance":true,"exclusive":false,"hideEstimatedTimes":false,"pastServicesApproval":{"enabled":true},"pricing":{"model":"manual","useDistanceForApportioning":false,"zones":[],"costs":[],"timeDistanceConfig":{"baseFare":0,"costPerKm":0,"costPerMinute":0,"tolls":[],"additionalCharges":[]}},"reasons":["Personal"],"approvers":[],"entryTimes":[],"exitTimes":[],"maximumReservationTime":{"amount":1,"unit":"minutes"},"minimumReservationTime":{"amount":1,"unit":"minutes"},"reservationExpirationTime":{"amount":1,"unit":"hours"},"minimumApprovationAnticipationTime":{"enabled":false,"amount":1,"unit":"hours"},"minimumConfirmationTime":{"enabled":false,"amount":null,"unit":"hours"},"minimumTimeToAccept":{"enabled":false,"amount":1,"unit":"hours","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToStart":{"enabled":false,"amount":1,"unit":"hours","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToConfirm":{"enabled":false,"amount":1,"unit":"hours","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToAssignDriver":{"enabled":false,"amount":1,"unit":"hours","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"minimumTimeToAssignVehicle":{"enabled":false,"amount":1,"unit":"hours","sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"notifyNewODDRequest":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"notifyNewODDCreated":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"notifyUnboardedPassengers":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]},"sendAt":"eachStop"},"notifyPassengersWithoutReservation":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]},"sendAt":"eachStop"},"notifySkippedStop":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}},"notifications":[{"action":"oDDepartureAccepted","active":true},{"action":"oDDepartureStart","active":true},{"action":"oDDepartureEnd","active":true},{"action":"oDDepartureStopSkiped","active":true},{"action":"oDDepartureAssigned","active":true},{"action":"oDDepartureCanceled","active":true},{"action":"oDDepartureDriverAssigned","active":true},{"action":"oDDepartureDriverReAssigned","active":true},{"action":"oDDepartureApproved","active":true}],"userRequests":{"freeRequests":{"enabled":true,"asap":false},"limitedOptions":{"enabled":false},"joinDepartures":{"enabled":true,"maxCapacity":5,"distanceRatio":0},"defaultProvider":"653fd68233d83952fafcd4be","emergencyRequests":{"enabled":false},"exclusiveRequests":{"enabled":false},"multipleRequests":{"enabled":false,"amountLimit":0},"reasons":{"enabled":false,"list":[]}},"restrictRequests":{"forService":{"enabled":false,"settings":{"reservationSchedule":{"enabled":false,"minimum":"","maximum":""},"userCustomParams":{"enabled":false,"params":[]},"geographical":{"enabled":false,"zones":[]}}},"forProviders":{"enabled":false,"settings":[]}},"providers":{"restrictCreation":{"enabled":false,"allowed":[]},"restrictProviding":{"enabled":false,"allowed":[]}},"skipApproval":{"byBudgetPercentage":{"enabled":false,"amount":null}},"legOptions":[],"allowsObservations":true,"allowsEdit":{"enabled":true,"settings":{"startLocation":true,"endLocation":true,"serviceDate":true,"state":""}},"endServiceLegAutomatically":{"enabled":false,"stopId":null,"distance":100,"timer":{"amount":5,"unit":"minutes"}}}],"oDDSettings":{"joinNewAdminODDs":true,"enableToNewUsers":{"enabled":true,"specificParams":{"enabled":false,"params":[]}}},"allowsRating":true,"allowsScreenshots":true,"snapshots":{"service":{"enabled":true,"retentionTime":{"amount":0,"unit":"hours"}},"nonService":{"enabled":true,"retentionTime":{"amount":0,"unit":"hours"}}},"allowGenericVehicles":true,"usesPin":false,"validation":{"enabled":true,"timestamp":{"enabled":true,"allowsSkip":true},"dailyLimit":{"enabled":false,"allowsSkip":false,"amount":0},"timeLimit":{"enabled":false,"allowsSkip":false,"amount":1,"time":1,"unit":"minutes"},"departureLimit":{"enabled":false,"allowsSkip":false,"amount":0},"allowsStatic":false,"usesTickets":true,"usesPasses":true,"ticketPrice":100,"customValidation":{"enabled":true,"name":"rut","description":"rut"},"customValidationParams":{"driverParams":[],"passengerParams":[],"maxValidationTime":{"amount":1,"unit":"hours"}},"validationToken":"","usesInternalNFC":false,"bCValidation":{"enabled":true,"field":""},"customQRValidation":{"enabled":true,"field":"Rut"},"DNIValidation":{"enabled":true,"field":"rut","allowsExternal":true},"external":[{"enabled":true,"service":"webcontrol"}]},"assistant":{"enabled":false,"entryTimes":[],"departureTimes":[],"collecting":false,"description":""},"harassmentAssistanceSettings":{"enabled":true,"showTextAbove":true,"aboveText":"","showInformation":true,"informationText":""},"harassmentAssistance":true,"healthPoll":{"enabled":false,"askUser":false},"custom":{"driverApp":{"visibleCode":"plate"},"passengerApp":{"visibleCode":"plate"},"reports":{"visibleCode":"plate"}},"internalLegs":{"enabled":false},"fleetParams":[],"departureHourFulfillment":{"enabled":false,"ranges":[]},"arrivalHourFulfillment":{"enabled":false,"ranges":[]},"auxiliaryTrackers":[],"startUnassignedDeparture":false,"validateDeparture":{"enabled":true},"dashboardAssignation":{"asap":{"minutesTillNextDeparture":360}},"passengerList":{"enabled":false,"data":{"fullName":false,"validationParam":false,"phone":false,"community":false}},"notifyPassBudgetPercentage":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]},"percentages":{"general":{"enabled":false,"amount":0,"criteriaToNotify":"oneTime"},"byAccounts":{"enabled":false,"accounts":[]}}},"userApp":{"allowsMultipleReservations":{"enabled":true,"amountLimit":0}},"routeDeviation":{"maxDistance":100,"maxTime":5,"enabled":false,"notify":{"enabled":false,"sendTo":{"destinataries":"admins","emails":[],"adminLevels":[],"roles":[]}}}},"carpool":{"boardingConditions":{"enabled":false,"pickupLocationTolerance":200,"boardingTimeWindow":30,"driverPassengerProximity":100,"boardingQueryDelay":5},"emergencyCallSettings":{"enabled":true},"enabled":false,"communityOptions":false,"routePublishingOptions":[],"routeSearchRestrictions":[],"emergencyCall":{"enabled":true}},"cabpool":{"parameters":{"area":null,"originDistrict":null,"destinationDistrict":null,"folio":null,"line":null},"hasSOS":true},"schoolbus":{"enabled":false}},"validationParams":{"allowMultipleUseValidationCodes":false,"forceMandatoryParams":false,"params":[{"mandatory":true,"check":true,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a66","name":"rut","description":"rut","dataType":"rut","isUserStop":false,"validationExpr":""},{"mandatory":false,"check":false,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a67","name":"address","description":"Domicilio","dataType":"location","isUserStop":true,"validationExpr":""},{"mandatory":false,"check":false,"show":false,"private":true,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a68","name":"coordinates","description":"Coordenadas","dataType":"coordinates","isUserStop":true,"validationExpr":""},{"mandatory":true,"check":true,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a69","name":"Color","description":"","dataType":"string","isUserStop":false,"validationExpr":""},{"mandatory":true,"check":true,"show":true,"private":false,"internal":false,"options":[],"_id":"66e1bbff79c01d88c09c4a6a","name":"Animal","description":"","dataType":"string","isUserStop":false,"validationExpr":""}],"enabled":true},"parkingLots":{"enabled":false,"enableToAllUsers":false,"reservationByDay":false,"allowsScreenshots":false,"reservationModel":"priority","accessModel":"reservation","controlAccessAndExit":true,"usesCarpoolModel":false,"reservationLimit":{"time":1,"unit":"days"},"entryLimit":{"time":15,"unit":"minutes"},"exitLimit":{"time":15,"unit":"minutes"},"noExitLimit":{"time":1,"unit":"hours"},"necessaryTripsForAllDays":2,"necessaryTripsForMinDays":1,"minAvailableDays":3,"maxAvailableDays":5,"ranges":[],"terms":null,"specificLots":{"enabled":false,"lotIds":[]},"lotIdsAndKeysParams":[],"notifyInactiveUsers":{"enabled":false,"days":7},"chatWithoutReservation":false,"showPhoneNumber":false,"usesTickets":false,"usesPasses":false},"balance":{"enabled":true},"betaFeatures":[],"allowsManualUsers":true,"replacesManualUser":false,"allowAds":true,"allowCustomEmail":false,"allowCustomId":false,"hasUserMessagingSystem":true,"driverCanCreateRoutes":true,"products":{"enabled":true}},"emailSuffixes":[],"admins":[],"timezone":"Chile/Continental","type":"normal","distance":0,"allowAds":false,"assocCommunities":[],"public":true,"name":"Comunidad Automatización 2","site":"http://adminstage.allrideapp.com","terms":null,"country":"cl","isStudentsCommunity":false,"hasBusesSystem":true,"language":"es","avatar":"https://s3.amazonaws.com/allride.uploads/communityAvatar_6654ae4eba54fe502d4e4187_1717603083265.png","badge":"https://s3.amazonaws.com/allride.uploads/communityAvatar_6654ae4eba54fe502d4e4187_1717603083787.png","createdAt":"2024-05-27T16:01:18.808Z","updatedAt":"2024-11-28T14:20:04.318Z","__v":394}
    ...    headers=${headers}
    # Verifica el código de estado esperado (puedes ajustarlo según tus expectativas)
    ${code}=    convert to string    ${response.status_code}
    Status Should Be    200
    Log    ${code}
